# Gitの基礎学習
このドキュメントでは、Gitの基礎について学習した内容を記録する。

# なぜバージョン管理システムを使うのか

以下の観点を工数をかけずに行うために利用する。

- 変更履歴の調査
- 以前の状態に戻す
- チーム開発の管理
- 変更理由を知る。

順に見出しとしていく。

## 変更履歴の調査

バージョン管理システムを用いない場合、変更前のソースコードを残せない
何らかの方法で残していたとしても、ソースコード_日付といった形式で名称変更する必要があったり
ソフトウェアの力を借りずに差分を取得することが難しい。
バージョン管理システムを導入することで、コマンド一発で変更前後を比較することができ
調査の工数を大幅に削減できる。
Gitでは以下のコマンドで差分を調査できる。

```
git diff 確認したいリビジョンやHEAD
```

## 以前の状態に戻す
バージョン管理システムを用いない場合、前回のソースコードを直接更新してしまうとある程度しか戻せない。

バージョン管理システムを利用する事で、修正に問題があった場合CUI/GUI上から簡単に前回の状態を復元できる。
Gitでは定期的にコミットしておけば、いくらでもやり直しができる。

```
git reset [FileName] #ステージングを戻す
git reset --hard [FileName] #ステージング/編集を戻す


git checkout HEAD [FileName] #編集をHEADに戻す。

```

## チーム開発の管理

バージョン管理システムを用いない場合、チーム開発は非常に困難を極める。

例として、開発者AとBが同じソースコードをいじると、後勝ちで上書きされてしまい先に修正を終えた方の成果物が消されてしまったり、1つのソースコードを開発者複数人で修正する場合、それぞれの作業完了を待つ必要がある。

バージョン管理システムを用いると複数開発者が同じソースを修正しコミットした場合、「競合」という形で知らせてくれる。
さらに、ツールによっては競合の解決をしないとコミットができないため、マージを強制する事ができる。

さらにGitでは「ローカルリポジトリ」という概念で開発者個人でリポジトリを持つことが可能であるため、リモートにコミットするまでは他開発者の事を深く考える必要がない。

## 変更理由を知る。
バージョン管理システムを用いない場合、ソースコードの変更は別のドキュメントやソースコードコメントとして残しておかないと変更した理由が把握できなくなってしまう。

この状態のコメントやドキュメントは開発が長引くとメンテナンスを怠りがちで、ルールが形骸化してしまう可能性も高い。

バージョン管理システムを用いると、コミット時には必ずコメントを入力する。というルール１つで変更履歴を知ることができる。
Gitではさらにブランチをわかりやすい名称にすることで、「何の改修を行ったか」を伝えることができる。

# なぜGitなのか
バージョン管理システムはGitに限らず、様々なものがある。
Gitは**「分散型バージョン管理」**という方式を採用していることが
他のバージョン管理システムとの大きな違いである。

ここでは、Gitに次いで人気のある「SVN」と比較する。

## 分散管理と直列管理
SVNは「直列管理」方式を採用しており、

> 1つのリモートリポジトリがすべてのソースコードを管理する

という方式でバージョン管理を行う。

この方式では、複数の開発者がソースコードの編集を行うことができるが、
リモートにしか変更履歴を持てないので多くの場合完成したソースコードをCommitするまでの履歴は保有できない。

対してGitは開発者個人が、「ローカルリポジトリ」という「リモートリポジトリ」の完全なクローンを持つことができる。

これにより、開発者は途中経過を「ローカルリポジトリ」にコミットし、変更履歴を残しつつ完成したソースコードを「リモートリポジトリ」にプッシュする。
というフローで開発を行える。

また、何らかの障害でリポジトリが消えてしまった際にはSVNだと泣くことになるが、Gitであれば誰かのローカルリポジトリから完全なリモートリポジトリを復元できる。

# 「ブランチ」の違い
GitにもSVNにも「ブランチ」という概念がある。
ブランチはある時点までの変更で作業用のリポジトリを作成することができる。

ここにも大きな違いがあり、「SVN」では

- **ファイル単位で変更履歴を管理する方式**
- **ブランチの実態は同期されないリポジトリのコピー**

であり、作成に時間がかかったり、いざブランチをマージしようとすると競合が発生する機会が多い。

「Git」でのブランチは

- **ある地点のコミットまでのすべてのファイル情報をもとに変更履歴を管理する**
- **すべてのブランチは作成元のコミット履歴を保有する**

という特徴があり、

- ブランチのマージは異なるコミットの差分チェックのみで完了する。
- すべてのファイル情報をコミットごとに持つため、ブランチ作成時の変更履歴調査が速くブランチ作成が速い

という特徴がある。

# まとめ_なぜGitを利用するのか

- バージョン管理を行うことで、チーム開発が大幅に楽になり、傷害調査の際にも役に立つ
- Gitは開発者ごとにリポジトリを持てるので、完成するまでのソースコードでも好き放題できる
- Gitを用いることで、競合の解決やブランチ作成も他のツールより大幅に速く正確にできる。

~~ほかにもGithubとかの存在は大きいと思うが…~~